<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprJohnCar</spriteName>
  <solid>-1</solid>
  <visible>-1</visible>
  <depth>-5</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>sprJohnCarMask</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>doorindex = 0
trunkindex = 0
my_id = instance_create(x, y, objPlayerCarFloor)
my_id.image_angle = image_angle
if instance_exists(objEnemy) {
    my_id = instance_create(x + lengthdir_x(43, image_angle + 180), y + lengthdir_y(43, image_angle + 180), objSpecificWeapon)
    //if global.maskindex = 8 
    my_id.image_index = 1 //else my_id.image_index = 7
    my_id.ammo = 6
    my_id.image_angle = 90 + image_angle + random(10)
    my_id.depth = -6
}

my_id = instance_create(x, y, objPlayerCarTrunk)
my_id.image_angle = image_angle

if !instance_exists(objPlayer) {
    on = 1 scrCenterOn(x, y) depth = -1
} else on = 0
done = 0

image_speed = 0
if !instance_exists(objPlayer) {
    my_id = instance_create(x, y, objPlayerDead)
    my_id.visible = 0
    my_id.bled = 1
}
wait = 0
start = 30
enter = 0
trunk = instance_exists(objEnemy)

engine=0
visited=0
instance_deactivate_object(objSwat)

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if !instance_exists(objPlayer) exit

//Open trunk.
if trunk {
    if point_distance(objPlayer.x, objPlayer.y, x + lengthdir_x(48, image_angle + 180), y + lengthdir_y(48, image_angle + 180)) &lt; 32 {
        if trunkindex &lt; 6 trunkindex += 0.5
    } else {
        if trunkindex &gt; 0 trunkindex -= 0.5
    }
}

if on = 1 {
    if done = 0 {
        if doorindex &lt; 6 doorindex += 0.2
        else {
            my_id = instance_create(x, y, objPlayerMouse)
            my_id.active = 0
            my_id.direction = image_angle + 90
            my_id.active = 0
            with objPlayerDead instance_destroy()
            wait = 18
            done = 1
        }
    }
}

if wait &gt; 0 {
    wait -= 1
    my_id.direction = image_angle + 90
    my_id.x += lengthdir_x(2, image_angle + 90)
    my_id.y += lengthdir_y(2, image_angle + 90)
    my_id.legindex += 0.35
    my_id.image_index += 0.2
} else {
    if done = 1 {
        my_id.active = 1 done = 2 scrSaveFloor() on = 2
    }
}

if done = 2 and global.done = 0 {
    if doorindex &gt; 0.2 doorindex -= 0.2
    else {
        if doorindex &gt; 0 sound_play(sndCarClose) doorindex = 0
    }
}

if global.done = 1 or room = rmStore1 or room = rmPizzaHut1 or room = rmVideoStore1 or room = rmBar1 or room = rmStore2 or room = rmPizzaHut2 or room = rmVideoStore2 or room = rmBar2 or room = rmStore3 or room = rmPizzaHut3 or room = rmVideoStore3 or room = rmBar3 {
    if point_distance(x + lengthdir_x(6, image_angle), y, objPlayer.x, objPlayer.y) &lt; 80 and objPlayer.visible = 1 {
        if enter = 0 {
            if doorindex &lt; 6 {
                if doorindex = 0 sound_play(sndCarOpen)
                doorindex += 0.5
            }
        } else {
            if doorindex &gt; 0.25 doorindex -= 0.25
            else {
                if doorindex &gt; 0 sound_play(sndCarClose) doorindex = 0
            }
        }
    } else {
        if doorindex &gt; 0.25 doorindex -= 0.25
        else {
            if doorindex &gt; 0 sound_play(sndCarClose) doorindex = 0
        }
    }

    index = image_index
    image_index = 0
    mask_index = sprite_index
    if place_meeting(x, y, objPlayer) or enter = 1 {
        enter = 1
        solid = 0
        depth = -5
        with objPlayer active = 0
        if point_distance(x, y, objPlayer.x, objPlayer.y) &gt; 12 {
            objPlayer.x += lengthdir_x(2, point_direction(objPlayer.x, objPlayer.y, x, y))
            objPlayer.y += lengthdir_y(2, point_direction(objPlayer.x, objPlayer.y, x, y))
        } else {
            with objPlayer visible = 0
            if sprite_index = sprJohnCar {
                if image_index &gt; 0.25 image_index -= 0.25
                else {
                    sound_play(sndCarEngine) sprite_index = sprJohnCarStart image_index = 0
                    if instance_exists(objPlayerMouse) SteamIncStat("Car", 1)
                }
            }
            if sprite_index = sprJohnCarStart {
                if image_index &lt; 5 image_index += 0.25
                if start &gt; 0 start -= 1
                else {
                    objEffector.next = 1
                    room_persistent = 0
                    objEffector.fade = 1
                    if instance_exists(objPlayerMouse) or room = rmHouse1Downstairs
                    or room = rmBuildingFloor1 or room = rmPhoneHomEntranceBiker or room = rmHighballer or room = rmEurogamer {
                        objEffector.nextroom = scrCarNextRoom(room) if room = rmTrainstationEntrance {
                            objEffector.newsong = 1 objEffector.song = working_directory + "\Static.mp3"
                        } else {
                            objEffector.newsong = 1 objEffector.song = working_directory + "\Redial.mp3"
                            if room = rmBuildingFloor1 objEffector.song = working_directory + "\Static.mp3"
                            if room = rmPhoneHomEntranceBiker objEffector.song = working_directory + "\ItsSafeNow.mp3"
                        }
                    } else {
                        objEffector.nextroom = nextroom objEffector.newsong = 1 objEffector.song = scrGetSong(room)
                    }

                }
            }

        }
        mask_index = sprJohnCarMask
    } else image_index = index
    mask_index = sprJohnCarMask
    if room = rmStore1 or room = rmPizzaHut1 or room = rmVideoStore1 or room = rmBar1 or room = rmStore2 or room = rmPizzaHut2 or room = rmVideoStore2 or room = rmBar2 or room = rmStore3 or room = rmPizzaHut3 or room = rmVideoStore3 or room = rmBar3 nothing = 1
    else {
        if global.done = 0 {
            mask_index = sprite_index exit
        }
        if instance_exists(objPlayerMouse) and global.done = 0 {
            mask_index = sprite_index exit
        }
    }
}



/*
index = image_index
mask_index = sprite_index
image_index = 0
if place_meeting(x, y, objPlayer) {
    image_index = index
    if image_angle = 0 and objEffector.fade = 0 {
        if objPlayer.sprite_index = sprPWalkGirlfriend nothing = 1
        else objPlayer.sprite_index = sprPWalkUnarmed
        if objPlayer.y &lt; y objPlayer.y += 3
        if image_index &lt; 2 image_index += 0.2
        if objPlayer.y &gt; y - 8 {
            if image_index &lt;= 2 //sound_play(sndCarClose) if engine = 0 and image_index &gt; 7 
            {
                engine = 1
                if instance_exists(objPlayerMouse) SteamIncStat("Car", 1) //sound_play(sndCarEngine)
            }
            if image_index &lt; 5 image_index += 0.25
            else {
                objEffector.next = 1
                room_persistent = 0
                objEffector.fade = 1
                if instance_exists(objPlayerMouse) or room = rmHouse1Downstairs 
                or room = rmBuildingFloor1 or room = rmPhoneHomEntranceBiker or room = rmHighballer or room = rmEurogamer {
                    objEffector.nextroom = scrCarNextRoom(room) if room = rmTrainstationEntrance {
                        objEffector.newsong = 1 objEffector.song = working_directory + "\Static.mp3"
                    } else {
                        objEffector.newsong = 1 objEffector.song = working_directory + "\Redial.mp3"
                        if room = rmBuildingFloor1 objEffector.song = working_directory + "\Static.mp3"
                        if room = rmPhoneHomEntranceBiker objEffector.song = working_directory + "\ItsSafeNow.mp3"
                    }
                } else {
                    objEffector.nextroom = nextroom objEffector.newsong = 1 objEffector.song = scrGetSong(room)
                }
            }
        }
    }
    if image_angle = 90 and objEffector.fade = 0 {
        if objPlayer.sprite_index = sprPWalkGirlfriend nothing = 1
        else objPlayer.sprite_index = sprPWalkUnarmed
        if objPlayer.x &lt; x objPlayer.x += 3
        if image_index &lt; 2 image_index += 0.2
        if objPlayer.x &gt; x - 8 {
            if image_index &lt;= 2 //sound_play(sndCarClose) 
            if engine = 0 and image_index &gt; 7 {
                engine = 1
                if instance_exists(objPlayerMouse) SteamIncStat("Car", 1) ///sound_play(sndCarEngine)
            }
            if image_index &lt; 12 image_index += 0.2
            else {
                objEffector.next = 1
                room_persistent = 0
                    //global.resetstory=1 
                    //  global.afterreset=global.level 
                objEffector.fade = 1
                if instance_exists(objPlayerMouse) or room = rmHouse1Downstairs 
                or room = rmBuildingFloor1 or room = rmPhoneHomEntranceBiker or room = rmHighballer or room = rmEurogamer {
                    objEffector.nextroom = scrCarNextRoom(room) if room = rmTrainstationEntrance {
                        objEffector.newsong = 1 objEffector.song = working_directory + "\Static.mp3"
                    } else {
                        objEffector.newsong = 1 objEffector.song = working_directory + "\Redial.mp3"
                        if room = rmBuildingFloor1 objEffector.song = working_directory + "\Static.mp3"
                        if room = rmPhoneHomEntranceBiker objEffector.song = working_directory + "\ItsSafeNow.mp3"
                    }
                } else {
                    objEffector.nextroom = nextroom objEffector.newsong = 1 objEffector.song = scrGetSong(room)
                }
            }
        }
    }
    if image_angle = 180 and objEffector.fade = 0 {
        if objPlayer.sprite_index = sprPWalkGirlfriend nothing = 1
        else objPlayer.sprite_index = sprPWalkUnarmed
        if objPlayer.y &gt; y objPlayer.y -= 3
        if image_index &lt; 2 image_index += 0.2
        if objPlayer.y &lt; y + 8 {
            if image_index &lt;= 2 //sound_play(sndCarClose) 
            if engine = 0 and image_index &gt; 7 {
                engine = 1
                if instance_exists(objPlayerMouse) SteamIncStat("Car", 1) ///sound_play(sndCarEngine)
            }
            if image_index &lt; 12 image_index += 0.2
            else {
                objEffector.next = 1
                room_persistent = 0
                    //global.resetstory=1 
                    //global.afterreset=global.level 
                objEffector.fade = 1

                if instance_exists(objPlayerMouse) or room = rmHouse1Downstairs 
                or room = rmBuildingFloor1 or room = rmPhoneHomEntranceBiker or room = rmHighballer or room = rmEurogamer {
                    objEffector.nextroom = scrCarNextRoom(room) if room = rmTrainstationEntrance {
                        objEffector.newsong = 1 objEffector.song = working_directory + "\Static.mp3"
                    } else {
                        objEffector.newsong = 1 objEffector.song = working_directory + "\Redial.mp3"
                        if room = rmBuildingFloor1 objEffector.song = working_directory + "\Static.mp3"
                        if room = rmPhoneHomEntranceBiker objEffector.song = working_directory + "\ItsSafeNow.mp3"
                    }
                } else {
                    objEffector.nextroom = nextroom objEffector.newsong = 1 objEffector.song = scrGetSong(room)
                }
            }
        }
    }
    if image_angle = 270 and objEffector.fade = 0 {
        if objPlayer.sprite_index = sprPWalkGirlfriend nothing = 1
        else objPlayer.sprite_index = sprPWalkUnarmed
        if objPlayer.x &gt; x objPlayer.x -= 3
        if image_index &lt; 2 image_index += 0.2
        if objPlayer.x &lt; x + 8 {
            if image_index &lt;= 2 //sound_play(sndCarClose) 
            if engine = 0 and image_index &gt; 7 {
                engine = 1
                if instance_exists(objPlayerMouse) SteamIncStat("Car", 1) //sound_play(sndCarEngine)
            }
            if image_index &lt; 12 image_index += 0.2
            else {
                objEffector.next = 1
                room_persistent = 0
                    //global.resetstory=1 
                    //global.afterreset=global.level 
                objEffector.fade = 1
                if instance_exists(objPlayerMouse) or room = rmHouse1Downstairs 
                or room = rmBuildingFloor1 or room = rmPhoneHomEntranceBiker or room = rmHighballer or room = rmEurogamer {
                    objEffector.nextroom = scrCarNextRoom(room) if room = rmTrainstationEntrance {
                        objEffector.newsong = 1 objEffector.song = working_directory + "\Static.mp3"
                    } else {
                        objEffector.newsong = 1 objEffector.song = working_directory + "\Redial.mp3"
                        if room = rmBuildingFloor1 objEffector.song = working_directory + "\Static.mp3"
                        if room = rmPhoneHomEntranceBiker objEffector.song = working_directory + "\ItsSafeNow.mp3"
                    }
                } else {
                    objEffector.nextroom = nextroom objEffector.newsong = 1 objEffector.song = scrGetSong(room)
                }
            }
        }
    }
    exit
} else image_index = index
mask_index = sprJohnCarMask
if room = rmStore1 or room = rmPizzaHut1 or room = rmVideoStore1 or room = rmBar1 or room = rmStore2 or room = rmPizzaHut2 or room = rmVideoStore2 or room = rmBar2 or room = rmStore3 or room = rmPizzaHut3 or room = rmVideoStore3 or room = rmBar3 nothing = 1
else {
    if global.done = 0 {
        mask_index = sprite_index exit
    }
    if instance_exists(objPlayerMouse) and global.done = 0 {
        mask_index = sprite_index exit
    }
}
*/
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.revisit=revisit
if room=rmStore1 or room=rmPizzaHut1 or room=rmVideoStore1 or room=rmBar1 or room=rmStore2 or room=rmPizzaHut2 or room=rmVideoStore2 or room=rmBar2 or room=rmStore3 or room=rmPizzaHut3 global.done=1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>revisit = 0
if instance_exists(objPlayerMouseHouse) {
    if global.done = 1 nextroom = rmChapter
    else {
        nextroom = rmInterlude global.interlude = scrCarNextInterlude()
    }
} else nextroom = rmChapter

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_sprite_ext(sprite_index,image_index,x+1,y+1,image_xscale,image_yscale,image_angle,c_black,0.5)
draw_sprite_ext(sprite_index,image_index,x,y,image_xscale,image_yscale,image_angle,image_blend,image_alpha)
draw_sprite_ext(sprJohnCarDoor,0,x+lengthdir_x(14,image_angle)+lengthdir_x(22,image_angle+90),y+lengthdir_y(14,image_angle)+lengthdir_y(22,image_angle+90),image_xscale,image_yscale,image_angle-doorindex*10,image_blend,image_alpha)

if sprite_index = sprJohnCarStart {
    addx = -0.5 + random(1)
    addy = -0.5 + random(1)
} else {
    addx = 0
    addy = 0
}
draw_sprite_ext(sprite_index, image_index, x + addx, y + addy, image_xscale, image_yscale, image_angle, image_blend, image_alpha)
draw_sprite_ext(sprJohnCarDoor, 0, x+lengthdir_x(14,image_angle)+lengthdir_x(22,image_angle+90) + addx, y+lengthdir_y(14,image_angle)+lengthdir_y(22,image_angle+90) + addy, image_xscale, image_yscale, image_angle-doorindex*10, image_blend, image_alpha)

/*if place_meeting(x,y,objShotgun) {
draw_sprite_ext(sprArrow,0,x-lengthdir_x(64,d
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
