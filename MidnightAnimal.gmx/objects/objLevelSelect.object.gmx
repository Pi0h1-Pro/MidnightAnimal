<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprTrainstation</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>surf1=surface_create(room_width,room_height) 
surf2=surface_create(room_width,room_height) 

repeat(32) {
    myy = random(48)
    instance_create(random(room_width), room_height / 2 + random(48), objSeaGlimmer)
}


sea = 1
seax1 = 0
seax2 = 48
i = 0 

repeat(ceil(room_width / 160) + 1) {
    instance_create(i * 160, room_height / 2 - 64, objSkyline1)
    instance_create(i * 160, room_height / 2 - 64, objSkyline2)
    i += 1
}

repeat(12) {
    tree[i] = random(4)
    i += 1
}
myx = 0



i = 0

//Draw stars.
repeat(72) {
    starx[i] = random(room_width)
    stary[i] = random(room_height / 2)
    starsize[i] = random(2) * random(1)
    starintensity[i] = random(1)
    i += 1
}

sunalpha = 0
sunshine = 0

mapdir = 0
addx = 0
intro = 0
newsong = 1
global.levels[20] = 1
global.levels[21] = 1
global.levels[22] = 1

//Check to see if Xbox controller is being used.
if global.xbox = 1 {
    scrInitXboxButtons()
}
wait = 40
reload = 16
scrClearBlood()
level[0] = sprTrainstation
level[1] = sprApartment1
level[2] = sprApartment2
level[3] = sprHouse1
level[4] = sprHouse5
level[5] = sprHouse2
level[6] = sprHotel
level[7] = sprBuilding
level[8] = sprHouse3
level[9] = sprSwatLevel
level[10] = sprHouse4
level[11] = sprOffice
level[12] = sprHospital
level[13] = sprPoliceHQ
level[14] = sprBossClub
level[15] = sprMansion
level[16] = sprNoodleShop
level[17] = sprArcade
level[18] = sprPhoneLevel
level[19] = sprBossClub2
level[20] = sprVenusLevel
level[21] = sprEurogamerLogo
level[22] = sprTree
title[0] = "THE METRO"
title[1] = "NO TALK"
title[2] = "OVERDOSE"
title[3] = "DECADENCE"
title[4] = "TENSION"
title[5] = "FULL HOUSE"
title[6] = "CLEAN HIT"
title[7] = "NEIGHBORS"
title[8] = "PUSH IT"
title[9] = "CRACKDOWN"
title[10] = "HOT&amp;HEAVY"
title[11] = "DEADLINE"
title[12] = "TRAUMA"
title[13] = "ASSAULT"
title[14] = "VENGEANCE"
title[15] = "A NEW MORNING"
title[16] = "SAFEHOUSE"
title[17] = "FUN&amp;GAMES"
title[18] = "PRANKCALL"
title[19] = "RESOLUTION"
title[20] = "HIGHBALL"
title[21] = "EXPOSED"
title[22] = "FIREFIGHT"
chapter[0] = "Prelude"
chapter[1] = "Chapter I"
chapter[2] = "Chapter II"
chapter[3] = "Chapter III"
chapter[4] = "Chapter IV"
chapter[5] = "Chapter V"
chapter[6] = "Chapter VI"
chapter[7] = "Chapter VII"
chapter[8] = "Chapter IIX"
chapter[9] = "Chapter IX"
chapter[10] = "Chapter X"
chapter[11] = "Chapter XI"
chapter[12] = "Chapter XII"
chapter[13] = "Chapter XIII"
chapter[14] = "Chapter XIV"
chapter[15] = "Final Chapter"
chapter[16] = "Chapter XVI"
chapter[17] = "Chapter XVII"
chapter[18] = "Chapter XVIII"
chapter[19] = "Chapter XIX"
chapter[20] = "Bonus Chapter"
chapter[21] = "Special Chapter"
chapter[22] = "Epilogue"
song[0]="Jasper Byrne - Voyager"
song[1]="Perturbator - Technoir"
song[2]="Magna - Divide"
song[3]="Jasper Byrne - Decade Dance"
song[4]="Vestron Vulture - New Wave Hookers"
song[5]="Magic Sword - In the Face of Evil"
song[6]="Scattle - Pursuit"
song[7]="Perturbator - Sexualizer"
song[8]="M|O|O|N - Delay"
song[9]="Life Companions - Untitled"
song[10]="Scattle - Bloodline"
song[11]="Carpenter Brut - Roller Mobster"
song[12]="IAmTheKidYouKnowWhatIMean - Run"
song[13]="M|O|O|N - Quixotic"
song[14]="Sean Evans - Miami Theme"
song[15]="Magic Sword - The Way Home"
song[16]="?? - ??"
song[17]="Mega Drive - N.A.R.C."
song[18]="Cinimod - Rumble"
song[19]="Carpenter Brut - Le Perv"
song[20]="EL TIGR3 - She Swallowed Burning Coals"
song[21]="Mega Drive - Acid Spit"
song[22]="?? - ??"

if global.levels[15] = 1 {
    if file_exists(working_directory + "\exposed.lvl") levels = 22
    else levels = 20
} else levels = 15
select = 0
repeats = 16
myrepeats = 1
x = room_width / 2
y = room_height * 0.53

/*i=0
repeat (12) {
global.levels[i]=1
i+=1
}*/
/*i=0
repeat (20) {
global.levels[i]=1
i+=1
}*/

i = 0
repeat(20) {
    if global.levels[i] = 0 {
        if select = 0 and global.levels[1] = 1 select = i - 1 title[i] = "LOCKED"
    }
    i += 1
}

restart = 0
dir = 90

fade = 0
c_amount = 0

global.i = 0

alarm[0] = 45
state = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_create(x,y,objPalmTree)
alarm[0]=45</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if sea=1 {
    instance_create(random(room_width),room_height/2+3+random(48),objSeaGlimmer)
}

//Initialise Xbox controls.
if global.xbox = 1 {

    if checkbutton(0, getid(5)) {
        if presstart = 0 {
            presstart = 1
            scrXboxLevelSelectStart()
        }
    } else presstart = 0

    if checkbutton(0, getid(6)) {
        if pressback = 0 {
            pressback = 1
            scrXboxLevelSelectBack()
        }
    } else pressback = 0

    if leftthumb_x(0) &gt; 15000 {
        if pressright = 0 {
            pressright = 1
            scrXboxLevelSelectRight()
        }
    } else pressright = 0

    if leftthumb_x(0) &lt; -15000 {
        if pressleft = 0 {
            pressleft = 1
            scrXboxLevelSelectLeft()
        }
    } else pressleft = 0

    if leftthumb_y(0) &gt; 5000 {
        if pressup = 0 {
            pressup = 1
            scrXboxLevelSelectUp()
        }
    } else pressup = 0

    if leftthumb_y(0) &lt; -5000 {
        if pressdown = 0 {
            pressdown = 1
            scrXboxLevelSelectDown()
        }
    } else pressdown = 0

}

//Initiate keyboard controls.
if wait &gt; 0 wait -= 1
if keyboard_check_pressed(ord(global.upkey)) event_perform(ev_keypress, ord('W'))
if keyboard_check_pressed(ord(global.downkey)) event_perform(ev_keypress, ord('S'))
if keyboard_check_pressed(ord(global.leftkey)) event_perform(ev_keypress, ord('A'))
if keyboard_check_pressed(ord(global.rightkey)) event_perform(ev_keypress, ord('D'))


if !surface_exists(surf1) {
    surf1 = surface_create(view_wview[0], view_hview[0])
    surface_set_target(surf1)
    draw_clear_alpha(c_black, 0)
    surface_reset_target()
}

surface_set_target(surf1)
draw_clear_alpha(c_black, 0)
i = 0

if myrepeats &lt; repeats myrepeats += 0.25
if myrepeats &gt; repeats myrepeats -= 0.25
dist = point_distance(x, y, mouse_x, mouse_y) * 0.01
if dist &gt; 1 dist = 1

if state = 1 {
    if addx &gt; -96 addx -= 8
} else {
    if addx &lt; 0 addx += 8
}

//Locked levels.
repeat(myrepeats) {
    if title[select] = "LOCKED"
    color = merge_color(c_dkgray, c_black, i * (1 / sprite_get_number(sprite_index)))
    else color = merge_color(merge_color(c_fuchsia, c_white, 0.5 + lengthdir_x(0.5, dir * 3.12)), c_white, i * (1 / sprite_get_number(sprite_index)))
    draw_sprite_ext(sprite_index, i, x + addx * 0.75, y - i * 0.6, 1 + i * 0.01, 1 + i * 0.01, mapdir, color, 1)
    i += 1
}
mapdir += 0.5

//Draw text for level details.
if addx &lt; 0 {
    if global.highscore[select] &gt; 0 {
        draw_set_font(fntLevelSelect)
        draw_set_halign(fa_center)
        draw_set_valign(fa_top)
        draw_set_color(c_white)
        draw_text(400 + 180 + addx * 3.3, 92, "HIGHSCORE:")
        draw_set_color(c_white)
        draw_text(400 + 180 + addx * 3.3 + string_width("HIGHSCORE: ") * 0.5 + string_width(string(global.highscore[select])) * 0.5, 92, string(global.highscore[select]))
        draw_set_font(fntLevelSelect)
        draw_set_color(c_white)
        draw_text(400 + 180 + addx * 3.3, 106, "GRADE:    ")
        draw_set_font(fntGradeSmall)
        draw_set_color(c_red)
        draw_text(420 + 202 + addx * 3.3, 108, scrNumberToGrade(global.grade[select]))
    } else {
        draw_set_font(fntLevelSelect)
        draw_set_halign(fa_center)
        draw_set_valign(fa_top)
        draw_set_color(c_white)
        draw_text(400 + 180 + addx * 3.3, 92, "HIGHSCORE:")
        draw_set_color(c_white)
        draw_text(400 + 180 + addx * 3.3 + string_width("HIGHSCORE: ") * 0.5 + string_width("-") * 0.5, 92, "-")
        draw_set_font(fntLevelSelect)
        draw_set_color(c_white)
        draw_text(420 + 180 + addx * 3.3, 106, "GRADE:    ")
        draw_set_font(fntGradeSmall)
        draw_set_color(c_red)
        draw_text(400 + 202 + addx * 3.3, 108, "-")
    }

    draw_set_font(fntLevelSelect)
    draw_set_halign(fa_left)
    draw_set_valign(fa_top)
    draw_set_color(c_white)
    draw_text(400 + 180 + addx * 3.3 - string_width("GRADE:    ") * 0.5, 140, "START WITH INTRO:")
    if intro = 1 draw_set_color(c_red)
    else draw_set_color(c_white)
    draw_text(400 + 180 + addx * 3.3 - string_width("GRADE:    ") * 0.5, 150, "YES")
    draw_set_color(c_gray)
    draw_text(400 + 180 + addx * 3.3 - string_width("GRADE:    ") * 0.5 + string_width("YES"), 150, "/")
    if intro = 0 draw_set_color(c_red)
    else draw_set_color(c_white)
    draw_text(400 + 180 + addx * 3.3 - string_width("GRADE:    ") * 0.5 + string_width("YES/"), 150, "NO")

    draw_set_font(fntVHSMusic)
    draw_set_halign(fa_center)
    draw_set_valign(fa_center)
    draw_set_color(merge_color(c_orange,c_maroon,0.75+lengthdir_x(0.25,dir*5)))
    draw_text(room_width / 2, room_height - 38 - 1, song[select])
    draw_text(room_width / 2, room_height - 38 + 1, song[select])
    draw_text(room_width / 2, room_height - 38, song[select])
    draw_text(room_width / 2, room_height - 38, song[select])
    draw_set_color(merge_color(c_white,c_yellow,0.25+lengthdir_x(0.25,dir*5+180)))
    draw_text(room_width / 2, room_height - 38, song[select])
    //Music.

    
    
    //draw_text(room_width/2+24,room_height*0.9+48,song[select])
    
    //draw_text(room_width/2-1+24,room_height*0.9-1+48,song[select])
    //surface_reset_target()
}

draw_set_font(fntLevelSelectTitle)
draw_set_halign(fa_center)
draw_set_valign(fa_center)
texts = 7 + lengthdir_x(15, dir * 15)
if texts &lt; 1 texts = 1
if texts &gt; 22 texts = 22
i = 0

repeat(texts) {
    draw_set_color(merge_color(merge_color(c_orange, c_fuchsia, 0.5 + lengthdir_x(0.5, dir * 3.232)), c_white, i * (1 / 22)))
    draw_text_transformed(room_width / 2, room_height * 0.28 - i * 0.5, chapter[select], 1 + i * 0.01, 1 + i * 0.01, 0)
    i += 1
}

texts = 7 + lengthdir_x(15, dir * 15 - 180)
if texts &lt; 1 texts = 1
if texts &gt; 22 texts = 22
i = 0

repeat(texts) {
    draw_set_color(merge_color(merge_color(c_yellow, c_aqua, 0.5 + lengthdir_x(0.5, dir * 3.232)), c_white, i * (1 / 22)))
    draw_text_transformed(room_width / 2, room_height - room_height * 0.28 + i * 0.5, title[select], 1 + i * 0.01, 1 + i * 0.01, 0)
    i += 1
}
surface_alpha()
surface_reset_target()


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="53">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if state = 0 and select &lt; 20 {
    state = 1 exit
}

if global.levels[select] = 1 fade = 1
else exit

if intro = 0 {
    if select = 0 {
        global.sequence = rmSequence1
        global.level = rmTrainstationEntrance
        global.pretitle = "Prelude"
        global.title = "THE METRO"
        song = working_directory + "\Obituary.mp3"
    }
    if select = 1 {
        global.sequence = rmSequence2
        global.level = rmApartment1Entrance
        global.pretitle = "Scene I"
        global.title = "NO TALK"
        song = working_directory + "\FuckedTheDevil.mp3"
    }
    if select = 2 {
        global.sequence = rmSequence3
        global.level = rmApartment2Entrance
        global.pretitle = "Scene II"
        global.title = "OVERDOSE"
        song = working_directory + "\Level2.mp3"
    }
    if select = 3 {
        global.sequence = rmSequence4
        global.level = rmHouse1Downstairs
        global.pretitle = "Scene III"
        global.title = "DECADENCE"
        song = working_directory + "\Orchid.mp3"
    }
    if select = 4 {
        global.sequence = rmSequence5
        global.level = rmHouse5Downstairs
        global.pretitle = "Scene IV"
        global.title = "TENSION"
        song = working_directory + "\Ximena.mp3"
    }
    if select = 5 {
        global.sequence = rmSequence6
        global.level = rmHouse2Downstairs
        global.pretitle = "Scene V"
        global.title = "FULL HOUSE"
        song = working_directory + "\Battlefield.mp3"
    }

    if select = 6 {
        global.sequence = rmSequence7
        global.level = rmHotelEntrance
        global.pretitle = "Scene VI"
        global.title = "CLEAN HIT"
        song = working_directory + "\Invasion.mp3"
    }

    if select = 7 {
        global.sequence = rmSequence8
        global.level = rmBuildingFloor1
        global.pretitle = "Scene VII"
        global.title = "NEIGHBORS"
        song = working_directory + "\NearDark.mp3"
    }

    if select = 8 {
        global.sequence = rmSequence9
        global.level = rmHouse3Downstairs
        global.pretitle = "Scene VIII"
        global.title = "PUSH IT"
        song = working_directory + "\Rezorecta.mp3"
    }

    if select = 9 {
        global.sequence = rmSequence10
        global.level = rmSwatDownstairs
        global.pretitle = "Scene IX"
        global.title = "CRACKDOWN"
        song = working_directory + "\Crackdown.mp3"
    }

    if select = 10 {
        global.sequence = rmSequence11
        global.level = rmHouse4Middle
        global.pretitle = "Scene X"
        global.title = "HOT&amp;HEAVY"
        song = working_directory + "\Obsession.mp3"
    }
    if select = 11 {
        global.sequence = rmSequence12
        global.level = rmOfficeEntrance
        global.pretitle = "Scene XI"
        global.title = "DEADLINE"
        song = working_directory + "\Mandarin.mp3"
    }
    if select = 12 {
        global.sequence = rmSequence12bDownstairs
        global.level = rmHospitalTitle
        global.pretitle = "Scene XII"
        global.title = "TRAUMA"
        song = working_directory + "\Flatline.mp3"
    }
    if select = 13 {
        global.sequence = rmSequence13
        global.level = rmPoliceHQFloor1
        global.pretitle = "Scene XIII"
        global.title = "ASSAULT"
        song = working_directory + "\DressedToKill.mp3"
    }
    if select = 14 {
        global.sequence = rmSequence14
        global.level = rmBossClubFloor1
        global.pretitle = "Scene XIV"
        global.title = "VENGEANCE"
        song = working_directory + "\HangEm.mp3"
    }
    if select = 15 {
        global.sequence = rmChapter
        global.level = rmMansionEntrance
        global.pretitle = "Scene XV"
        global.title = "SHOWDOWN"
        song = working_directory + "\TurfMain.mp3"
    }
    if select = 16 {
        global.sequence = rmMCBar
        global.level = rmNoodleShop
        global.pretitle = "Scene XVI"
        global.title = "SAFEHOUSE"
        song = working_directory + "\InnerAnimal.mp3"
    }
    if select = 17 {
        global.sequence = rmMCSequence2
        global.level = rmArcadeDownstairs
        global.pretitle = "Scene XVII"
        global.title = "FUN&amp;GAMES"
        song = working_directory + "\Musikk2.mp3"
    }
    if select = 18 {
        global.sequence = rmMCSequence3
        global.level = rmPhoneHomEntranceBiker
        global.pretitle = "Scene XVIII"
        global.title = "PRANKCALL"
        song = working_directory + "\Knock.mp3"
    }
    if select = 19 {
        global.sequence = rmMCSequence4
        global.level = rmJanitors
        global.pretitle = "Scene XIX"
        global.title = "RESOLUTION"
        song = working_directory + "\InnerAnimal.mp3"
    }
    if select = 20 {
        global.sequence = rmChapter
        global.level = rmHighballer
        global.pretitle = "BONUS Scene"
        global.title = "HIGHBALL"
        song = working_directory + "\Perturbator.mp3"
    }
    if select = 21 {
        global.sequence = rmChapter
        global.level = rmEurogamer
        global.pretitle = "SPECIAL Scene"
        global.title = "EXPOSED"
        song = working_directory + "\ToTheTop.mp3"
    }
} else {
    if select = 0 {
        global.sequence = rmSequence1
        global.level = rmSequence1
        global.pretitle = "PRELUDE"
        global.title = "THE METRO"
        song = working_directory + "\WeDontTalkMuchAnymore.mp3"
    }
    if select = 1 {
        global.sequence = rmSequence2
        global.level = rmSequence2
        global.pretitle = "FIRST CHAPTER"
        global.title = "NO TALK"
        song = working_directory + "\WeDontTalkMuchAnymore.mp3"
    }
    if select = 2 {
        global.sequence = rmSequence3
        global.level = rmSequence3
        global.pretitle = "SECOND CHAPTER"
        global.title = "OVERDOSE"
        song = working_directory + "\WeDontTalkMuchAnymore.mp3"
    }
    if select = 3 {
        global.sequence = rmSequence4
        global.level = rmSequence4
        global.pretitle = "THIRD CHAPTER"
        global.title = "DECADENCE"
        song = working_directory + "\WeDontTalkMuchAnymore.mp3"
    }
    if select = 4 {
        global.sequence = rmSequence5
        global.level = rmSequence5
        global.pretitle = "FOURTH CHAPTER"
        global.title = "TENSION"
        song = working_directory + "\WeDontTalkMuchAnymore.mp3"
    }
    if select = 5 {
        global.sequence = rmSequence6
        global.level = rmSequence6
        global.pretitle = "FIFTH CHAPTER"
        global.title = "FULL HOUSE"
        song = working_directory + "\WeDontTalkMuchAnymore.mp3"
    }

    if select = 6 {
        global.sequence = rmSequence7
        global.level = rmSequence7
        global.pretitle = "SIXTH CHAPTER"
        global.title = "CLEAN HIT"
        song = working_directory + "\WeDontTalkMuchAnymore.mp3"
    }

    if select = 7 {
        global.sequence = rmSequence8
        global.level = rmSequence8
        global.pretitle = "SEVENTH CHAPTER"
        global.title = "NEIGHBORS"
        song = working_directory + "\WeDontTalkMuchAnymore.mp3"
    }

    if select = 8 {
        global.sequence = rmSequence9
        global.level = rmSequence9
        global.pretitle = "EIGHTH CHAPTER"
        global.title = "PUSH IT"
        song = working_directory + "\WeDontTalkMuchAnymore.mp3"
    }

    if select = 9 {
        global.sequence = rmSequence10
        global.level = rmSequence10
        global.pretitle = "NINTH CHAPTER"
        global.title = "CRACKDOWN"
        song = working_directory + "\WeDontTalkMuchAnymore.mp3"
    }

    if select = 10 {
        global.sequence = rmSequence11
        global.level = rmSequence11
        global.pretitle = "TENTH CHAPTER"
        global.title = "HOT&amp;HEAVY"
        song = working_directory + "\WeDontTalkMuchAnymore.mp3"
    }
    if select = 11 {
        global.sequence = rmSequence12
        global.level = rmSequence12
        global.pretitle = "ELEVENTH CHAPTER"
        global.title = "DEADLINE"
        song = working_directory + "\WeDontTalkMuchAnymore.mp3"
    }
    if select = 12 {
        global.sequence = rmSequence12bDownstairs
        global.level = rmHospitalCutscene
        global.pretitle = "TWELFTH CHAPTER"
        global.title = "TRAUMA"
        song = working_directory + "\Flatline.mp3"
    }
    if select = 13 {
        global.sequence = rmSequence13Downstairs
        global.level = rmSequence13Downstairs
        global.pretitle = "THIRTEENTH CHAPTER"
        global.title = "ASSAULT"
        song = working_directory + "\WeDontTalkMuchAnymore.mp3"
    }
    if select = 14 {
        global.sequence = rmSequence14
        global.level = rmSequence14
        global.pretitle = "FOURTEENTH CHAPTER"
        global.title = "VENGEANCE"
        song = working_directory + "\WeDontTalkMuchAnymore.mp3"
    }
    if select = 15 {
        global.sequence = rmChapter
        global.level = rmMansionEntrance
        global.pretitle = "FIFTEENTH CHAPTER"
        global.title = "SHOWDOWN"
        song = working_directory + "\TurfMain.mp3"
    }
    if select = 16 {
        global.sequence = rmMCBar
        global.level = rmRewind
        global.pretitle = "SIXTEENTH CHAPTER"
        global.title = "SAFEHOUSE"
        newsong = 0
        song = working_directory + "\ToTheTop.mp3"
    }
    if select = 17 {
        global.sequence = rmMCSequence2
        global.level = rmMCSequence2
        global.pretitle = "SEVENTEENTH CHAPTER"
        global.title = "FUN&amp;GAMES"
        song = working_directory + "\ItsSafeNow.mp3"
    }
    if select = 18 {
        global.sequence = rmMCSequence3
        global.level = rmMCSequence3
        global.pretitle = "EIGHTEENTH CHAPTER"
        global.title = "PRANKCALL"
        song = working_directory + "\ItsSafeNow.mp3"
    }
    if select = 19 {
        global.sequence = rmMCSequence4
        global.level = rmMCSequence4
        global.pretitle = "NINETEENTH CHAPTER"
        global.title = "RESOLUTION"
        song = working_directory + "\ItsSafeNow.mp3"
    }
    if select = 20 {
        global.sequence = rmChapter
        global.level = rmHighballer
        global.pretitle = "BONUS CHAPTER"
        global.title = "HIGHBALL"
        song = working_directory + "\Perturbator.mp3"
    }
    if select = 21 {
        global.sequence = rmChapter
        global.level = rmEurogamer
        global.pretitle = "SPECIAL CHAPTER"
        global.title = "EXPOSED"
        song = working_directory + "\ToTheTop.mp3"
    }

}

if intro = 1 {
    mylevel = global.level
    if select = 15 mylevel = rmChapter
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>dir += 0.25
color2 = merge_color(c_white, merge_color(c_aqua, c_fuchsia, 0.5 + lengthdir_x(0.5, dir * 3.12)), 0.5 + lengthdir_x(0.25, dir * 1.13))
color1 = merge_color(c_aqua, merge_color(merge_color(c_lime, c_yellow, 0.5 + lengthdir_x(0.5, dir * 3.12)), c_maroon, 0.125 + lengthdir_y(0.125, dir * 1.73)), 0.35 + lengthdir_y(0.25, dir * 1.73))
d3d_set_projection_ortho(0, 0, view_wview[0], view_hview[0], 0)

//Draw sky.
draw_rectangle_color(-20, -20, room_width + 20, room_height + 20, merge_color(c_black, c_maroon, 0.15 + lengthdir_x(0.15, dir * 0.25)), merge_color(c_black, c_maroon, 0.15 + lengthdir_x(0.15, dir * 0.25 + 45)), merge_color(c_red, c_orange, 0.65 + lengthdir_x(0.24, dir * 0.5 + 30)), merge_color(c_red, c_orange, 0.65 + lengthdir_x(0.24, dir * 0.5)), 0)

global.color3 = merge_color(merge_color(merge_color(c_white, c_silver, 0.5 + lengthdir_x(0.5, dir * 3.12)), c_yellow, 0.125 + lengthdir_y(0.125, dir * 1.73)), merge_color(c_white, c_fuchsia, 0.5 + lengthdir_x(0.3, dir)), 0.5 + lengthdir_x(0.5, dir * 2.33))
draw_set_blend_mode(bm_add)

//Draw stars.
i = 0
repeat(72) {
    draw_circle_color(starx[i], stary[i], starsize[i], merge_color(merge_color(c_silver, c_white, random(1)), c_white, random(starintensity[i])), c_black, 0)
    i += 1
}

//Draw moon.
draw_set_blend_mode(bm_add)
draw_circle_color(room_width / 2, room_height / 3, 180 + lengthdir_x(40, dir * 0.25), c_maroon, c_black, 0)
draw_sprite_general(sprMoon, 0, 0, 0, 160, 160, room_width / 2 - 40, room_height / 4 - 40, 0.5, 0.5, -view_angle[0], c_red, c_red, merge_color(c_orange, c_yellow, 0.5 + lengthdir_x(0.5, dir)), merge_color(c_orange, c_yellow, 0.5 + lengthdir_x(0.5, dir)), 1)
draw_set_blend_mode(bm_normal)

//Draw back skyline.
with objSkyline1 {
    draw_sprite_ext(sprite_index, 0, x, y, image_xscale, image_yscale, image_angle, image_blend, image_alpha)
    draw_sprite_general(sprite_index, 1, 0, 0, 160, 64, x, y, image_xscale, image_yscale, image_angle, merge_color(c_orange, c_red, 0.5 + lengthdir_x(0.5, dir * 0.7)), merge_color(c_orange, c_red, 0.5 + lengthdir_x(0.5, dir + 110)), merge_color(c_olive, c_maroon, 0.5 + lengthdir_x(0.5, dir * 0.8)), merge_color(c_olive, c_maroon, 0.5 + lengthdir_x(0.5, dir * 0.8 + 110)), image_alpha)
    draw_sprite_general(sprite_index, 2, 0, 0, 160, 64, x, y, image_xscale, image_yscale, image_angle, merge_color(c_red, c_white, 0.5 + lengthdir_x(0.5, dir * 0.7)), merge_color(c_red, c_white, 0.5 + lengthdir_x(0.5, dir + 110)), merge_color(c_fuchsia, c_red, 0.5 + lengthdir_x(0.5, dir * 0.8)), merge_color(c_fuchsia, c_red, 0.5 + lengthdir_x(0.5, dir * 0.8 + 110)), image_alpha)
    dir += 2
    if x &lt; room_width x += 0.02
    else x -= room_width
}

//Draw front skyline with reflection.
with objSkyline2 {
    draw_sprite_ext(sprite_index, 0, x, y, image_xscale, image_yscale, image_angle, image_blend, image_alpha)
    draw_sprite_general(sprite_index, 1, 0, 0, 160, 64, x, y, image_xscale, image_yscale, image_angle, merge_color(c_orange, c_red, 0.5 + lengthdir_x(0.5, dir * 0.7)), merge_color(c_orange, c_red, 0.5 + lengthdir_x(0.5, dir + 110)), merge_color(c_olive, c_maroon, 0.5 + lengthdir_x(0.5, dir * 0.8)), merge_color(c_olive, c_maroon, 0.5 + lengthdir_x(0.5, dir * 0.8 + 110)), image_alpha)
    draw_sprite_general(sprite_index, 2, 0, 0, 160, 64, x, y, image_xscale, image_yscale, image_angle, merge_color(c_red, c_white, 0.5 + lengthdir_x(0.5, dir * 0.7)), merge_color(c_red, c_white, 0.5 + lengthdir_x(0.5, dir + 110)), merge_color(c_fuchsia, c_red, 0.5 + lengthdir_x(0.5, dir * 0.8)), merge_color(c_fuchsia, c_red, 0.5 + lengthdir_x(0.5, dir * 0.8 + 110)), image_alpha)
    draw_set_blend_mode(bm_add)
    i = 0

    //Draw reflections of skyline in water.
    repeat(31) {
        draw_sprite_general(sprite_index, 2, 0, i * 2, 160, i * 2 + 1, x + lengthdir_x(1, dir + i * 25), y + 96 - i, image_xscale, -0.5, image_angle, merge_color(c_red, c_white, 0.5 + lengthdir_x(0.5, dir * 0.7)), merge_color(c_red, c_white, 0.5 + lengthdir_x(0.5, dir + 110)), merge_color(c_fuchsia, c_red, 0.5 + lengthdir_x(0.5, dir * 0.8)), merge_color(c_fuchsia, c_red, 0.5 + lengthdir_x(0.5, dir * 0.8 + 110)), image_alpha)
        i += 1
    }

    draw_set_blend_mode(bm_normal)
    dir += 2
    if x &lt; room_width + 160 x += 0.05
    else x -= room_width + 160
}

//Draw sea glimer.
draw_set_blend_mode(bm_add)
draw_rectangle_color(0, room_height / 2, room_width, room_height / 2 + 32, c_gray, c_gray, c_black, c_black, 0)
with objSeaGlimmer draw_sprite_ext(sprite_index, image_index, x, y, 1, 1, 0, merge_color(c_gray, merge_color(c_orange, c_red, random(1)), random(1)), 0.6)

draw_set_blend_mode(bm_normal)

draw_set_blend_mode(bm_normal)
d3d_set_projection_ortho(0, 0, view_wview[0], view_hview[0], view_angle[0])


if surface_exists(surf1) {

    //Draws the black outline of the actual text and image.
    draw_surface_ext(surf1, 0, -1, 1, 1, 0, c_black, 1)
    draw_surface_ext(surf1, -1, 0, 1, 1, 0, c_black, 1)
    draw_surface_ext(surf1, 0, 1, 1, 1, 0, c_black, 1)
    draw_surface_ext(surf1, 1, 0, 1, 1, 0, c_black, 1)
    
    //Draws the colour of the text and image in the level select.
    draw_surface_ext(surf1, 0, 0, 1, 1, 0, merge_color(c_white, merge_color(c_aqua, c_fuchsia, 0.5 + lengthdir_x(0.5, dir * 3)), 0.25 + lengthdir_x(0.25, dir)), 1)
}



//Draw masks for each level.
/*currentmask=scrLevelGetMask(select)
if currentmask&gt;=0 {
if global.masks[currentmask]=0 color=c_black else color=c_white
draw_sprite_ext(sprMaskDropFront,currentmask,400+156+addx*3.3,125,1,1,-90,color,1)
} 
else draw_sprite_ext(sprNoMask,0,400+156+addx*3.3,125,1,1,0,c_white,1)
*/

if fade = 0 {
    if c_amount &lt; 180 {
        c_amount += 10
        color1 = merge_color(c_silver, merge_color(c_aqua, c_white, 0.5 + lengthdir_x(0.5, c_amount)), 0.5 + lengthdir_x(0.5, c_amount))
        if c_amount &gt; 90 color2 = merge_color(c_silver, merge_color(c_white, c_aqua, abs(lengthdir_y(1, c_amount))), abs(lengthdir_y(1, c_amount)))
        else color2 = c_white
        draw_set_blend_mode(bm_subtract)
        draw_rectangle_color(view_xview[0] - 10, view_yview[0] - 10, view_xview[0] + view_wview[0] + 10, view_yview[0] + view_hview[0] + 10, color1, color2, color2, color1, 0)
        draw_set_blend_mode(bm_normal)
    }
}

if fade = 1 {
    if c_amount &gt; 0 {
        c_amount -= 5
        if restart = 0 scrSongVolume(c_amount * (1 / 180))
        color1 = merge_color(c_white, merge_color(c_aqua, c_white, 0.5 + lengthdir_x(0.5, c_amount)), 0.5 + lengthdir_x(0.5, c_amount))
        if c_amount &gt; 90 color2 = merge_color(c_silver, merge_color(c_maroon, c_orange, abs(lengthdir_y(1, c_amount))), abs(lengthdir_y(1, c_amount)))
        else color2 = c_white
        draw_set_blend_mode(bm_subtract) draw_rectangle_color(view_xview[0] - 10, view_yview[0] - 10, view_xview[0] + view_wview[0] + 10, view_yview[0] + view_hview[0] + 10, color2, color1, color1, color2, 0)
        draw_set_blend_mode(bm_normal)
    } else {
        if restart = 0 {
            scrStopSong() scrSongVolume(1) if newsong = 1 scrPlaySong(song)
            if global.level = rmHospitalTitle
            room_goto(rmHospitalTitle)

            else {
                if intro = 1 room_goto(mylevel)

                else {
                    if select &lt;= 15 or select &gt;= 20 room_goto(rmChapter)
                    else
                        room_goto(rmMCChapter)
                }
            }
        } else room = rmMenu
    }
}


//Draw black rectangles on top and bottom of screen.
d3d_set_projection_ortho(0, 0, view_wview[0], view_hview[0], 0)
    //draw_set_color(c_black)
    //draw_rectangle(0, 0, room_width, 44, 0)
    //draw_rectangle(0, room_height, room_width, room_height - 44, 0)
draw_set_blend_mode(bm_subtract)

//Draw scanlines.
my_y = random(32)
draw_sprite_tiled(sprScanlines, 0, 0, my_y)


draw_set_blend_mode(bm_subtract)
//draw_circle_color(view_wview[0] / 2, view_hview[0] / 2, 240 + random(24), c_black, merge_color(c_white, c_aqua, 0.25 + random(0.25)), 0)
draw_set_blend_mode(bm_normal)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="87">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.xbox = 1 exit
if fade = 1 or wait &gt; 0 exit
wait = 3
if repeats &lt; sprite_get_number(sprite_index) repeats += 8
sound_play(sndNav)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="83">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.xbox = 1 exit
if fade = 1 or wait &gt; 0 exit
wait = 3
if repeats &gt; 8 repeats -= 8
sound_play(sndNav)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="68">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.xbox = 1 exit
if fade = 1 or wait &gt; 0 exit
wait = 3

if state = 1 {
    intro = !intro exit
}

mapdir = 180
if select &lt; levels select += 1
else select = 0
repeats = 8
if select = 0 repeats = 16
if select = 8 repeats = 16
myrepeats = 0
sound_play(sndNav)

sprite_index = level[select]
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="65">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.xbox = 1 exit
if fade = 1 or wait &gt; 0 exit
wait = 3

if state = 1 {
    intro = !intro exit
}

mapdir = 180
if select &gt; 0 select -= 1
else select = levels

repeats = 8
if select = 0 repeats = 16
if select = 8 repeats = 16
myrepeats = 0
sound_play(sndNav)

sprite_index = level[select]
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="40">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_perform(ev_keypress,ord('S'))
sound_play(sndNav)</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="39">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_perform(ev_keypress,ord('D'))
sound_play(sndNav)</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="38">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_perform(ev_keypress,ord('W'))
sound_play(sndNav)</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="37">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_perform(ev_keypress,ord('A'))
sound_play(sndNav)</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="27">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if state=1 {state=0 exit}
restart=1
fade=1</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="13">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_perform(ev_mouse,ev_global_left_press)</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
