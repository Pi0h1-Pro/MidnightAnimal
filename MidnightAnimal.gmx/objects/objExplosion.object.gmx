<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprRoomExplosion</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-5</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>image_speed=0
index=2
dir=random(1000)
amount=0
view_angle[0]=2
on=0
wait=300
bombalarm = 0
//if global.maskindex = 2 or global.maskindex=6
{
bombalarm = 450 + random(450)
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.test = 0
with objDoorV {
    if sprite_index = sprBombDoorV {
        if image_angle &gt; 0 or image_angle &lt; 0 global.test = 1
    }
}
with objDoorH2 {
    if sprite_index = sprBombDoorH {
        if image_angle &gt; 0 or image_angle &lt; 0 global.test = 1
    }
}

if global.test = 1 or((global.maskindex = 2 or global.maskindex = 6) and bombalarm &lt;= 0) {
    if on = 0 {
        image_index = 2
        sound_play(sndBigExplosion)
        scrSongVolume(0.1)
        vol = 0.1
        starttime = current_time


        with objBombGuy {
            repeat(12) {
                my_id = instance_create(x, y, objDoorDebris)
                my_id.direction = random(360)
                my_id.speed = 2 + random(3)
                my_id.friction = 0.1
            }

            scrMeleeBlood(x, y)

            repeat(24) {
                my_id = instance_create(x - 3 + random(6), y - 3 + random(6), objBloodDrop)
                my_id.image_xscale = 1 - random(0.2)
                my_id.image_yscale = my_id.image_xscale
                my_id.image_angle = point_direction(x, y, my_id.x, my_id.y)
                my_id.sprite_index = sprBloodSplatSmall
                my_id.direction = my_id.image_angle
                my_id.speed = 2 + random(4)
            }


            instance_create(x, y, objBombGround)
            instance_create(x, y, objBombGuyDie)
            instance_destroy()
        }


        with objEBombTinker {
            scrMeleeBlood(x, y)
            sprite_index = sprExplodedBody2
            image_angle = 45
            speed = 2.5
            direction = 45
        }
        with objBombCables {
            sprite_index = sprBombCablesBroken
            image_speed = 0.12
        }

        with objWindowV {
            if x = 64 and y = 224 {
                instance_create(x, y, objWindowExplode)
                instance_destroy()
            }
        }

        with objEStandGuardBomb {
            scrMeleeBlood(x, y)
            sprite_index = sprExplodedBody1
            image_angle = -90
            speed = 3
            direction = 270
        }

        with objDoorH2 {
            if sprite_index = sprBombDoorH {
                my_id = instance_create(x, y, objDestroyedDoor)
                my_id.direction = 90
                my_id.speed = 3 + random(1)
                instance_destroy()
            }
        }

        with objDoorV2 {
            if sprite_index = sprBombDoorV {
                my_id = instance_create(x, y, objDestroyedDoor)
                my_id.direction = 0
                my_id.speed = 3 + random(1)
                my_id.image_angle = -90
                instance_destroy()
            }
        }
        image_index = 9
        with objPlayer {
            if place_meeting(x, y, objExplosion) {
                my_id = instance_create(x, y, objPlayerBombDead)
                my_id.direction = point_direction(objExplosion.x + 85, objExplosion.y + 85, x, y)
                my_id.image_angle = my_id.direction
                my_id.speed = 5

                with my_id {
                    repeat(24) {
                        my_id = instance_create(x - 3 + random(6), y - 3 + random(6), objBloodDrop)
                        my_id.image_xscale = 1 - random(0.2)
                        my_id.image_yscale = my_id.image_xscale
                        my_id.image_angle = point_direction(x, y, my_id.x, my_id.y)
                        my_id.sprite_index = sprBloodSplatSmall
                        my_id.direction = direction - 90 + random(180)
                        my_id.speed = 2 + random(4)
                    }
                }
                instance_destroy()
            }
        }
        image_index = 2

    }
    if on = 0 {
        on = 1
    }
}

if on = 1 {
    if current_time - starttime &gt; 4000 {
        if vol &lt; 1 {
            vol += 0.01 scrSongVolume(vol)
        }
    }
}
if (bombalarm &gt; 0) {
    bombalarm -= 1
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="objWindow">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if on = 0 exit
if other.image_index &gt; 0 exit
if instance_exists(objLSD) sound_play(choose(sndGlassBreakLSD, sndGlassReverse))
else sound_play(choose(sndGlass1, sndGlass2))
other.image_index = 1
other.shotdir = round(point_direction(x + 75, y + 77, other.x, other.y) * (1 / 90)) * 90
if other.object_index = objGlassPanelV {
    with other {
        alarm[0] = 3
        image_index = 1
        shoty = y + 16
        repeat(7) {
            i = shoty - 1 + random(2)
            my_id = instance_create(x + 4, i, objShard)
            my_id.hspeed = sign(lengthdir_x(1, shotdir)) * (0.5 + random(1)) + lengthdir_y(1, -45 + i * 0.71) * sign(lengthdir_x(1, shotdir))
            my_id.image_index = ceil(random(8)) * random(1)
            my_id.i = i
            my_id.shoty = shoty
            my_id.shotdir = shotdir
            with my_id {
                dist = point_distance(x, i, x, shoty) * 0.5
                if dist &lt; 1 dist = 1
                motion_add(shotdir, 5 / dist)
            }
        }
    }
}

if other.object_index = objGlassPanelH {
    with other {
        alarm[0] = 3
        image_index = 1
        shotx = x + 16
        repeat(7) {
            i = shotx - 1 + random(2)
            my_id = instance_create(i, y + 4, objShard)
            my_id.vspeed = sign(lengthdir_y(1, shotdir)) * (0.5 + random(1)) + lengthdir_y(1, 45 + i * 0.71) * sign(lengthdir_y(1, shotdir))
            my_id.image_index = ceil(random(8)) * random(1)
            my_id.i = i
            my_id.shotx = shotx
            my_id.shotdir = shotdir
            with my_id {
                dist = point_distance(i, y, shotx, y) * 0.5
                if dist &lt; 1 dist = 1
                motion_add(shotdir, 5 / dist)
            }
        }
    }
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="objEnemy">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if on &gt; 0 and index &lt; 6 {
    if point_distance(other.x, other.y, x + 77, y + 75) &lt; 75 {
        with other {
            scrMeleeBlood(x, y)
            repeat(3) {
                scrMeleeBlood(x - 16 + random(32), y - 16 + random(32))
            }
            repeat(5) {
                my_id = instance_create(x - 3 + random(6), y - 3 + random(6), objIntestine)
                my_id.direction = point_direction(x, y, my_id.x, my_id.y)
                my_id.speed = 1.5 + random(1.5)
            }
            my_id = instance_create(x, y, objDeadBody)
            my_id.sprite_index = sprEDeadExploded
            if object_index = objEnemyFat or object_index = objEnemyFatLSD or object_index = objEnemyFatStatic my_id.sprite_index = sprEFatExploded
            if object_get_parent(object_index) = objDogPatrol my_id.sprite_index = sprDogDeadPieces
            my_id.direction = point_direction(objExplosion.x + 77, objExplosion.y + 75, x, y)
            my_id.image_angle = my_id.direction
            my_id.speed = 2 + random(1)
            my_id.image_index = random(360)
            instance_destroy()
        }
    } else {}
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if on=0 exit
if on=1 {
if amount&lt;1 amount+=0.02 
if wait&gt;0 wait-=1 else on=2
}
if on=2 {
if amount&gt;0 amount-=0.001
}
draw_set_blend_mode(bm_subtract)
draw_sprite_ext(sprExplosionSmoke,0,x,y,image_xscale,image_yscale,image_angle,merge_color(merge_color(c_black,c_gray,amount),merge_color(c_black,c_white,amount),0.5+lengthdir_x(0.5,dir)),1)
draw_sprite_ext(sprExplosionSmoke,1,x,y,image_xscale,image_yscale,image_angle,merge_color(merge_color(c_black,c_gray,amount),merge_color(c_black,c_white,amount),0.5+lengthdir_x(0.5,dir*0.6+90)),1)
draw_sprite_ext(sprExplosionSmoke,2,x,y,image_xscale,image_yscale,image_angle,merge_color(merge_color(c_black,c_gray,amount),merge_color(c_black,c_white,amount),0.5+lengthdir_x(0.5,dir*1.2+180)),1)
draw_sprite_ext(sprExplosionSmoke,3,x,y,image_xscale,image_yscale,image_angle,merge_color(merge_color(c_black,c_gray,amount),merge_color(c_black,c_white,amount),0.5+lengthdir_x(0.5,dir*0.8+270)),1)
draw_set_blend_mode(bm_normal)
dir+=2

if index&lt;20 {
if index&gt;=2 and index&lt;=20 draw_sprite_ext(sprRoomExplosion,index-2,x,y,image_xscale,image_yscale,image_angle,merge_color(c_orange,c_maroon,amount),1)
if index&gt;=1 and index&lt;=19 draw_sprite_ext(sprRoomExplosion,index-1,x,y,image_xscale,image_yscale,image_angle,merge_color(c_yellow,c_orange,amount),1)
if index&lt;=18 draw_sprite_ext(sprRoomExplosion,index,x,y,image_xscale,image_yscale,image_angle,merge_color(c_white,c_yellow,amount),1)
index+=0.33 
}

if global.shake&lt;(20-index)*2 global.shake=(20-index)*2</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="82">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//if !instance_exists(objPlayer) 
scrSongVolume(1)
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
